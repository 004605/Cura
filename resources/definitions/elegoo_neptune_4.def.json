{
    "version": 2,
    "name": "ELEGOO NEPTUNE 4",
    "inherits": "fdmprinter",
    "metadata":
    {
        "visible": true,
        "author": "mastercaution",
        "manufacturer": "ELEGOO",
        "file_formats": "text/x-gcode",
        "platform": "elegoo_platform.3mf",
        "exclude_materials": [
            "generic_nylon",
            "generic_hips",
            "generic_bvoh",
            "generic_cpe",
            "generic_pc",
            "generic_pva",
            "generic_pvc"
        ],
        "has_machine_quality": true,
        "has_materials": true,
        "has_variants": true,
        "machine_extruder_trains": { "0": "elegoo_neptune4_extruder_0" },
        "platform_offset": [
            -2.2,
            14.5,
            -31
        ],
        "preferred_material": "generic_pla_175",
        "preferred_quality_type": "Elegoo_N4_layer_020",
        "preferred_variant_name": "0.40mm_Elegoo_Nozzle",
        "variants_name": "Nozzle Size"
    },
    "overrides":
    {
        "machine_name": { "default_value": "ELEGOO NEPTUNE 4" },
        "machine_width": { "default_value": 235 },
        "machine_depth": { "default_value": 230 },
        "machine_height": { "default_value": 270 },
        "machine_acceleration": { "value": 3000 },
        "machine_heated_bed": { "default_value": true },
        "machine_max_acceleration_e": { "value": 5000 },
        "machine_max_acceleration_x": { "value": 5000 },
        "machine_max_acceleration_y": { "value": 5000 },
        "machine_max_jerk_xy": { "value": 8.0 },
        "machine_nozzle_cool_down_speed": { "value": 0.75 },
        "machine_nozzle_heat_up_speed": { "value": 1.6 },
        "machine_head_with_fans_polygon":
        {
            "value": [
                [-55, 30],
                [55, 30],
                [55, -35],
                [-55, -35]
            ]
        },
        "gantry_height": { "value": 6 },
        
        "retraction_amount": { "default_value": 0.5 },
        "retraction_speed": { "default_value": 45 },
        "retraction_count_max": { "value": 80 },
        "machine_gcode_flavor": { "default_value": "RepRap (Marlin/Sprinter)" },
        "machine_start_gcode": { "default_value": "G28 ;home\nG92 E0 ;Reset Extruder\nG1 Z4.0 F3000 ;Move Z Axis up\nG92 E0 ;Reset Extruder\nG1 X1.1 Y20 Z0.28 F5000.0 ;Move to start position\nG1 X1.1 Y80.0 Z0.28 F1500.0 E10 ;Draw the first line\nG1 X1.4 Y80.0 Z0.28 F5000.0 ;Move to side a little\nG1 X1.4 Y20 Z0.28 F1500.0 E20 ;Draw the second line\nG92 E0 ;Reset Extruder\nG1 Z2.0 F3000 ;Move Z Axis up" },
        "machine_end_gcode": { "default_value": "G91 ;Relative positionning\nG1 E-2 F2700 ;Retract a bit\nG1 E-2 Z0.2 F2400 ;Retract and raise Z\nG1 X5 Y5 F3000 ;Wipe out\nG1 Z2 ;Raise Z more\nG90 ;Absolute positionning\nG1 X0 Y{machine_depth} ;Present print\nM106 S0 ;Turn-off fan\nM104 S0 ;Turn-off hotend\nM140 S0 ;Turn-off bed\nM84 X Y E ;Disable all steppers but Z" },
        
        "acceleration_enabled": { "value": true },
        "acceleration_layer_0": { "value": 3000 },
        "acceleration_print": { "value": 3000 },
        "acceleration_travel": { "value": 5000 },
        
        "cool_fan_full_layer": { "value": 2 },
        "cool_fan_speed": { "enabled": "resolveOrValue('cool_fan_enabled') == 'true' or cool_fan_enabled" },
        "cool_fan_speed_0":
        {
            "enabled": "resolveOrValue('cool_fan_enabled') == 'true' or cool_fan_enabled",
            "value": "cool_fan_speed if resolveOrValue('adhesion_type') == 'raft' else 0"
        },
        "cool_fan_speed_max": { "enabled": "resolveOrValue('cool_fan_enabled') == 'true' or cool_fan_enabled" },
        "cool_fan_speed_min": { "enabled": "resolveOrValue('cool_fan_enabled') == 'true' or cool_fan_enabled" },
        
        "infill_line_width":
        {
            "default_value": 0.45,
            "value": "line_width + 0.05"
        },
        "speed_print": 
        {
            "maximum_value_warning": "500",
            "default_value": 250
        },
        "speed_wall":
        {
            "maximum_value_warning": "500",
            "default_value": 125,
            "value": "speed_print / 2"
        },
        "speed_wall_0":
        {
            "maximum_value_warning": "500",
            "default_value": 125,
            "value": "speed_wall"
        },
        "speed_wall_x":
        {
            "maximum_value_warning": "500",
            "default_value": 200,
            "value": "speed_wall + (speed_wall / 2)"
        },
        "speed_topbottom":
        {
            "maximum_value_warning": "500",
            "default_value": 125,
            "value": "speed_wall"
        },
        "speed_travel":
        {
            "maximum_value_warning": "500",
            "default_value": 250,
            "value": "speed_print"
        },
        "speed_layer_0":
        {
            "maximum_value_warning": "500",
            "default_value": 60,
            "value": 60
        },
        "speed_print_layer_0": { "maximum_value_warning": "500" },
        "speed_travel_layer_0":
        {
            "maximum_value_warning": "500",
            "default_value": 200,
            "value": "speed_layer_0*2"
        },
        "speed_infill":
        {
            "maximum_value_warning": "500",
            "value": "speed_print"
        },
        "speed_roofing": { "maximum_value_warning": "500" },
        "speed_support": { "maximum_value_warning": "500" },
        "speed_support_infill": { "maximum_value_warning": "500" },
        "speed_support_interface": { "maximum_value_warning": "500" },
        "speed_support_roof": { "maximum_value_warning": "500" },
        "speed_support_bottom": { "maximum_value_warning": "500" },
        "speed_prime_tower": { "maximum_value_warning": "500" },
        "skirt_brim_speed":
        {
            "maximum_value_warning": "500",
            "value": "speed_print_layer_0"
        },
        
        "brim_gap": { "default_value": 0.1 },
        "brim_width": { "default_value": 5 },
        "gradual_support_infill_step_height": { "value": "5" },
        "infill_overlap": { "value": "10 if infill_sparse_density < 20.01 else 5 if infill_sparse_density < 40.01 and infill_pattern != 'concentric' else 0" },
        "infill_overlap_mm": { "value": "0.5 * (infill_line_width + (wall_line_width_x if wall_line_count > 1 else wall_line_width_0)) * infill_overlap / 100" },
        "infill_pattern": { "value": "'lines' if (infill_sparse_density > 35 or speed_print >= 80) else 'grid' " },
        "initial_layer_line_width_factor": { "value": "100.0 if resolveOrValue('adhesion_type') == 'raft' else 125 if line_width < 0.5 else 110" },
        "material_diameter": { "value": 1.75 },
        "material_final_print_temperature": { "value": "material_print_temperature" },
        "material_initial_print_temperature": { "value": "material_print_temperature" },
        "material_print_temperature_layer_0": { "value": "210 if material_print_temperature < 210 else material_print_temperature" },
        "min_infill_area": { "value": "5" },
        "minimum_interface_area": { "default_value": 10 },
        "minimum_support_area": { "value": "3 if support_structure == 'normal' else 0" },
        "optimize_wall_printing_order": { "default_value": true },
        "prime_tower_brim_enable": { "default_value": true },
        "prime_tower_min_volume": { "value": "(layer_height) * (prime_tower_size / 2)**2 * 3 * 0.5 " },
        "prime_tower_size": { "default_value": 30 },
        "prime_tower_wipe_enabled": { "default_value": false },
        "raft_base_speed": { "value": "0.4 * raft_speed" },
        "raft_base_thickness": { "value": "resolveOrValue('machine_nozzle_size') * 0.75" },
        "raft_interface_speed": { "value": "0.6 * raft_speed" },
        "raft_interface_thickness": { "value": "resolveOrValue('machine_nozzle_size') * 0.75" },
        "raft_margin": { "default_value": 5 },
        "raft_surface_fan_speed": { "value": "cool_fan_speed" },
        "raft_surface_line_width": { "value": "machine_nozzle_size * 1.25" },
        "raft_surface_thickness": { "value": "resolveOrValue('machine_nozzle_size')*0.375" },
        "retraction_hop": { "value": "layer_height if layer_height > 0.199 else 0.2" },

        "support_material_flow": { "value": "material_flow * 0.95" },
        "support_xy_distance": { "value": "machine_nozzle_size * 1.7" },
        "support_xy_distance_overhang": { "value": "machine_nozzle_size * 1.2 if support_interface_enable else machine_nozzle_size * 0.8" },
        "support_z_distance": { "value": "layer_height * 1.2 if (support_interface_enable and support_bottom_enable and layer_height < 0.16) or support_bottom_enable else layer_height" }
    }
}